## 高级技巧

本章内容
  1. 使用高级函数
  2. 防止篡改对象
  3. ...

22.1 高级函数

22.1.1 安全的类型检测
> JavaScript内置的类型检测并不是完全可靠，发生错误的情况不再少数，

1. **例如typeof操作符噢，由于它有一些无法预知的行为，经常会导致检测数据类型时得不到靠谱的结果。Safari在对正则表达式应用typeof操作符时会返回function,因此很难判断一个值是否是函数**

2. instanceof 操作符存在全局作用域的情况下，也是问题多多。

``` javascript
let isArray = value instanceof Array

```
以上代码要`true`,value必须是一个数组，而且还必须与Array构造函数在同一个全局的作用域中（比如value是一个页面中的iframe定义的，就会返回false）

解决以上问题的方案是调用Object的toString方法，都会返回一个[object NativeConstructorName]格式的字符串，每个类在内部都有一个[[class]]属性，这个属性中就指定了上述字符串中构造函数的名。

例如

``` javascript
let isArray = (value) => {
  return Object.prototype.toString.call(value) === '[object Array]'
}

let isFunction = (value) => {
  return Object.prototype.toString.call(value) === '[object Function]'
}

let isRegExp = (value) => {
  return Object.prototype.toString.call(value) === '[object RegExp]'
}

```
不过要注意IE中以COM对象实现的任何函数，isFunction都会返回false，因为他不是原生的javascript对象。


## 22.1.2 作用域安全的构造函数

## 22.1.3 惰性载入函数

## 22.1.4 函数绑定

## 22.1.5 函数柯里化

## 22.2 防止篡改对象