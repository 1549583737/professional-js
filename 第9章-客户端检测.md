**学习目标**
1. 使用能力检测
2. 用户代理检测的历史
3. 选择检测的方式

## 前言

> 各大浏览器在实现公共接口方面投入了很多精力，但是结果仍然是每一种浏览器都有各自存在不一致性的问题，面对普遍不一致的问题，开发人员要么采取迁就各方的“最小公分母”策略，要么就得利用各种客户端的检测方法，来突破或者规避种种局限。

## 能力检测

> 最常用也是最为人们广泛接受的客户端检测形式是能力检测，能力检测的目标不是识别特定的浏览器，而是识别浏览器的能力，采用这种形式不必顾忌特定的浏览器是如何如何，只要确定浏览器支持的特定的能力，就可以给出解决方案，举个例子。

在IE5之前的版本不支持**document.getElementById()**这个DOM方法，尽管可以使用非标准的**document.all**属性实现相同的功能，但是IE早期的版本中，确实不存在前面那个方法，于是就有了下面的能力检测代码。

``` javascript

function getElement (id) {
  if (document.getElementById) {
    return document.getElementById(id)
  } else if (document.all) {
    return document.all[id];
  } else {
    throw new Error('No way to retrieve element!')
  }
}

```

这里的**getElement**函数的用途是返回具有给定ID的元素，因为**document.getElementById**是实现这一目的的标准，所以一开始就检测了这个方法，如果该函数不存在就继续监测**document.all**是否存在，如果是就使用，如果两个特性都不满足，则创建一个错误并抛出。表示这个函数没有办法使用

主要要理解能力检测，首先必须要理解两个重要的概念。

1. 先检测达成目的的最常用的特性，可以保证代码最优化。因为在多数情况下，都可以避免测试多个条件。

2. 必须检测实际要用到的特性，一个特性存在并不意味着另外一个特性也存在。

``` javascript

function getWindowWith () {
  if (document.all) {
    return document.documentElement.clientWidth // 错误的使用例子
  } else {
    return window.innerWidth
  }
}


```

上面是一个错误使用能力检测的例子，检测**document.all**是否存在，并不意味着**document.documentElement.clientWith**也存在。