## 变量、作用域和内存问题

学习目标

1. 理解基本类型和引用类型的值
2. 理解执行环境
3. 理解垃圾收集

**JavaScript松散类型的本质，决定了它只是在特定时间用于保存特定的值的一个名字而已。由于不存在定义某个变量必须保存何种数据类型值的规则，变量的值，及其数据类型可以在脚本的声明周期内改变。**

## 4.1 基本类型和引用类型的值

js中包括两种不同数据类型的值

1. 几本类型值 (`undefined` `null` `string` `number` `boolean`)
2. 引用类型值 (`对象`)

## 4.1.1 动态属性

> 这节说了一个问题，只能给引用类型的值动态地添加属性，不能给基本类型的值添加。

## 4.1.2 复制变量值

> 两种数据类型，除了保存方式不一样之外，在从一个变量向另一个变量复制基本类型值和引用类型值时，也存在不同。

1. 如果从一个变量向另一个变量复制基本类型的值，会在变量对象上创建一个新值，然后把该值复制到为新变量分配的位置上。


``` javascript
var num1 = 5
var num2 = num1

```
看下图

![看下图](http://odssgnnpf.bkt.clouddn.com/%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%A4%8D%E5%88%B6.png)

2. 当用一个变量向另一个变量复制引用类型的值的时候，同样也会将存储在变量对象中的值复制一份放到新变量分配的空间中，不同的是，这个值的副本实际上是一个**指针**，而这个指针指向存储在堆中的一个对象，复制操作结束之后，两个变量实际上将引用同一个对象。所以只要改变其中一个变量就会影响到另一个变量。

``` javascript
var obj1 = new object()
var obj2 = obj1
ibj1.name = 'qianlongo'
alert(obj.name) // qianlongo
```

基本原理看下图

![](http://odssgnnpf.bkt.clouddn.com/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E5%A4%8D%E5%88%B6.png)

## 4.1.3 传递参数

> ECMAScript中所有函数的参数都是按值传递的，也就是说，把函数外部的值复制给函数内部的参数，就和把值从一个变量复制到另一个变量一样。

理解上面这句话，大概就可以理解js中的传参机制了，还有可以可以把函数的参数想象成局部变量。

## 4.1.4 检测类型

> 要检测一个变量是不是基本数据类型的？typeof是得力的工具，更具体一些旧事typeof可以确定一个变量是string、number、boolean、还是undefined，但是null会返回object。



